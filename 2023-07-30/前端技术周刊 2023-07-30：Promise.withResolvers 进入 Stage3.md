**é¡¹ç›®åœ°å€**ï¼š[olivewind/weekly](https://github.com/olivewind/weekly "olivewind/weekly")

**å¾®ä¿¡å…¬ä¼—å·**ï¼š[ä¾èµ–æ³¨å…¥](https://mp.weixin.qq.com/s/k8bm24JFz1BcSsjLtX4H0A)

**å‘å¸ƒæ—¶é—´**ï¼š2023.07.30

**æœ¬å‘¨å†…å®¹**ï¼šèµ„è®¯x2ã€å¼€æºx8ã€æ–‡ç« x4

***

## åŠ¨æ€

### [Promise.withResolvers è¿›å…¥ Stage3](https://github.com/tc39/proposal-promise-with-resolvers)

æŸäº›æƒ…å†µä¸‹éœ€è¦åœ¨ Promise å¤–éƒ¨è·å– resolve å’Œ reject å¥æŸ„ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè¿™ä¹ˆç¼–å†™ä»£ç 

```js

function cancelableTimeout(ms) {
  let cancel;
  const promise = new Promise((resolve, reject) => {
    const timeoutId = setTimeout(resolve, ms);
    cancel = () => {
      clearTimeout(timeoutId);
      reject(new Error('The timeout was canceled.'))
    }
  });

  return { promise, cancelTimeout };
}
```

æœ‰äº† `Promise.withResolvers` ä¹‹åï¼Œæˆ‘ä»¬çš„ä»£ç ä¼šç®€æ´å¾ˆå¤š

```js
function cancelableTimeout(ms) {
  const { promise, resolve, reject } = Promise.withResolvers();

  const timeoutId = setTimeout(resolve, ms);
  const cancelTimeout = () => {
    clearTimeout(timeoutId);
    reject(new Error('The timeout was canceled.'))
  }

  return { promise, cancelTimeout };
}
```


### [Prisma å‘å¸ƒ 5.0ï¼šé»˜è®¤æ›´å¿«](https://www.prisma.io/blog/prisma-5-f66prwkjx72s)

Prisma æ˜¯ä¸€æ¡†éå¸¸ä¼˜ç§€çš„ Type-Safe Node.js ORM æ¡†æ¶ï¼Œä¸ä¹…å‰å®£å¸ƒæ­£å¼å‘å¸ƒ 5.0 ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬æå¤§æå‡äº†å¯åŠ¨æ€§èƒ½ ğŸš€ğŸš€

ä¹‹å‰ï¼š
![[prisma.png]]
ç°åœ¨ï¼š
![[prisma2.png]]

## å¼€æº

### [TypeChat](https://github.com/microsoft/TypeChat)ï¼ˆ4.8k starï¼‰

ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼æ„å»ºè‡ªç„¶è¯­è¨€å¼äº¤äº’çš„åº”ç”¨ä¸€ç›´å¾ˆå›°éš¾ï¼Œè¿™äº›åº”ç”¨é€šå¸¸ä¾èµ–å¤æ‚çš„å†³ç­–æ ‘æ¥ç¡®å®šç”¨æˆ·æ„å›¾å¹¶æ”¶é›†å¿…è¦è¾“å…¥ã€‚å¦‚ä»Šå¤§å‹è¯­è¨€æ¨¡å‹ (LLM) ä½¿è¿™ä¸€åˆ‡å˜å¾—å®¹æ˜“ï¼Œä½†è¿™ä¹Ÿå¸¦æ¥äº†å¦å¤–çš„æŒ‘æˆ˜ï¼ŒåŒ…æ‹¬éœ€è¦é™åˆ¶æ¨¡å‹çš„å›å¤ä»¥ç¡®ä¿å®‰å…¨ã€æ„å»ºæ¨¡å‹çš„å“åº”ä»¥è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ï¼Œä»¥åŠç¡®ä¿æ¨¡å‹çš„å›å¤æœ‰æ•ˆã€‚æç¤ºå·¥ç¨‹æ—¨åœ¨è§£å†³è¿™äº›é—®é¢˜ï¼Œä½†éšç€é—®é¢˜çš„å¤æ‚åº¦æå‡ï¼Œæç¤ºå·¥ç¨‹çš„å­¦ä¹ æ›²çº¿ä¹Ÿä¼šå˜å¾—é™¡å³­ï¼Œæ•´ä¸ªé“¾è·¯å¼€å§‹å˜è„†å¼±ã€‚

**TypeChat ä½¿ç”¨æ¨¡å¼å·¥ç¨‹å–ä»£äº†æç¤ºå·¥ç¨‹**ï¼Œåªéœ€å®šä¹‰ä»£è¡¨è‡ªç„¶è¯­è¨€åº”ç”¨æ‰€æ”¯æŒçš„æ„å›¾çš„ç±»å‹ï¼ŒTypeChat å°†é€šè¿‡ä»¥ä¸‹æ–¹å¼å¤„ç†å‰©ä½™éƒ¨åˆ†ï¼š 
* ä½¿ç”¨ç±»å‹æ„å»º LLM æç¤º
* éªŒè¯ LLM å“åº”æ˜¯å¦ç¬¦åˆæ¶æ„ï¼Œå¦‚æœå¤±è´¥ï¼Œåˆ™é€šè¿‡è¿›ä¸€æ­¥çš„è¯­è¨€æ¨¡å‹äº¤äº’ä¿®å¤ä¸åˆæ ¼çš„è¾“å‡º
* ç®€æ´æ€»ç»“ï¼ˆä¸ä½¿ç”¨ LLMï¼‰å®ä¾‹å¹¶ç¡®è®¤å…¶ä¸ç”¨æˆ·æ„å›¾ä¸€è‡´

TypeChat çš„ä½¿ç”¨æ–¹å¼ç‰¹åˆ«ç®€å•ï¼š
```ts
// file:sentimentSchema.ts
// The following is a schema definition for determining the sentiment of a some user input.
export interface SentimentResponse {
    sentiment: "negative" | "neutral" | "positive";  // The sentiment of the text
}
```

```ts
// file:main.ts
import fs from "fs";
import path from "path";
import dotenv from "dotenv";
import { createLanguageModel, createJsonTranslator, processRequests } from "typechat";
import { SentimentResponse } from "./sentimentSchema";

// TODO: use local .env file.
dotenv.config({ path: path.join(__dirname, "../../../.env") });

const model = createLanguageModel(process.env);
const schema = fs.readFileSync(path.join(__dirname, "sentimentSchema.ts"), "utf8");
const translator = createJsonTranslator<SentimentResponse>(model, schema, "SentimentResponse");

// Process requests interactively or from the input file specified on the command line
processRequests("ğŸ˜€> ", process.argv[2], async (request) => {
    const response = await translator.translate(request);
    if (!response.success) {
        console.log(response.message);
        return;
    }
    console.log(`The sentiment is ${response.data.sentiment}`);
});
```



### [nodebestpractices](https://github.com/goldbergyoni/nodebestpractices/blob/master/README.chinese.md)ï¼ˆ91.5k starï¼‰

ä¸€ç³»åˆ— Node.JS æœ€ä½³å®è·µï¼ˆ2023 ç‰ˆï¼‰ï¼Œå€¼å¾—æ‰€æœ‰ Node.JS å¼€å‘è€…è¯¦ç»†é˜…è¯»ï¼ŒåŒ…å«å¦‚ä¸‹å…³é”®ç« èŠ‚ï¼š
* é¡¹ç›®ç»“æ„
* å¼‚å¸¸å¤„ç†
* ç¼–ç è§„èŒƒ
* è´¨é‡æ§åˆ¶
* ç”Ÿäº§å®è·µ
* å®‰å…¨å®è·µ
* æ€§èƒ½å®è·µ

![[nodejs.png]]

### [driver.js](https://github.com/kamranahmedse/driver.js)ï¼ˆ17.6k starï¼‰

ä¸€ä¸ªè½»é‡çº§ã€æ— ä¾èµ–çš„é¡µé¢æ“ä½œå¼•å¯¼åº“ï¼Œè¯¥åº“æœ‰å¦‚ä¸‹ä¸»è¦ç‰¹ç‚¹ï¼š
* **ç®€å•ä¸”è½»é‡**ï¼šä½¿ç”¨ç®€å•ï¼Œæ²¡æœ‰ä¾èµ–ï¼Œåªæœ‰ 5KB å¤§å°
* **å¯æ‰©å±•æ€§å¼º**ï¼šå…·å¤‡å¯æ‰©å±•æ€§æå¼ºçš„ APIï¼Œå¯ä»¥é«˜äº®ä»»ä½•ä¸œè¥¿
* **ç”¨æˆ·ä½“éªŒå¥½**ï¼šä»»ä½•æ“ä½œéƒ½æœ‰å¯¹åº”çš„é”®ç›˜å¿«æ·é”®
* **å…¼å®¹æ€§å‹å¥½**ï¼šåœ¨ä»»ä½•æµè§ˆå™¨ä¸Šéƒ½ä½“éªŒä¸€è‡´çš„ä½“éªŒ
![[driver.gif]]



### [visx](https://github.com/airbnb/visx)ï¼ˆ17.5k starï¼‰

ç”± Airbnb å›¢é˜Ÿå¼€æºçš„åŸºäº d3.js æ„å»ºçš„ä¸€ç³»åˆ— React ä½é˜¶ç»„ä»¶åŒ…ï¼ŒåŸºäºæ­¤å¯ä»¥æ„å»ºå±äºè‡ªå·±çš„å¯è§†åŒ–ç»„ä»¶åº“ã€‚
![[visx.png]]

### [eruda](https://github.com/liriliri/eruda)ï¼ˆ15.8k starï¼‰

ä¸€ä¸ªä¸“ä¸ºæ‰‹æœºç½‘é¡µå‰ç«¯è®¾è®¡çš„è°ƒè¯•é¢æ¿ï¼Œå®Œæˆåº¦å¾ˆé«˜ã€‚

![[debug.png]]

### [electron-vite](https://github.com/alex8088/electron-vite)ï¼ˆ1.3k starï¼‰
å·ç§°ä¸‹ä¸€ä»£ Electron å¼€å‘æ„å»ºå·¥å…·ï¼ŒåŸºäº Vite å®ç°ï¼Œå…·å¤‡å¦‚ä¸‹ä¸»è¦ç‰¹æ€§ï¼š
![[electron-vite.png]]

### [rrule](https://github.com/jakubroztocil/rrule)ï¼ˆ2.9k starï¼‰

ä¸€ä¸ªç”¨äºå¤„ç† iCalendar RFC ç­‰ä¸­å®šä¹‰çš„æ—¥å†æ—¥æœŸçš„é‡å¤è§„åˆ™ã€‚
```javascript
import { datetime, RRule, RRuleSet, rrulestr } from 'rrule'

// Create a rule:
const rule = new RRule({
  freq: RRule.WEEKLY,
  interval: 5,
  byweekday: [RRule.MO, RRule.FR],
  dtstart: datetime(2012, 2, 1, 10, 30),
  until: datetime(2012, 12, 31)
})

// Get all occurrence dates (Date instances):
rule.all()
[ '2012-02-03T10:30:00.000Z',
  '2012-03-05T10:30:00.000Z',
  '2012-03-09T10:30:00.000Z',
  '2012-04-09T10:30:00.000Z',
  '2012-04-13T10:30:00.000Z',
  '2012-05-14T10:30:00.000Z',
  '2012-05-18T10:30:00.000Z',

 /* â€¦ */]

// Get a slice:
rule.between(datetime(2012, 8, 1), datetime(2012, 9, 1))
['2012-08-27T10:30:00.000Z',
 '2012-08-31T10:30:00.000Z']

// Get an iCalendar RRULE string representation:
// The output can be used with RRule.fromString().
rule.toString()
"DTSTART:20120201T093000Z\nRRULE:FREQ=WEEKLY;INTERVAL=5;UNTIL=20130130T230000Z;BYDAY=MO,FR"

// Get a human-friendly text representation:
// The output can be used with RRule.fromText().
rule.toText()
"every 5 weeks on Monday, Friday until January 31, 2013"
```

### [component-party.dev](https://component-party.dev/)ï¼ˆ940 starï¼‰
è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„å·¥å…·åº“ï¼Œå¯ä»¥å±•ç¤ºåŒ…æ‹¬ Svelteã€Reactã€Vueã€Angularã€Qwik ç­‰å‡ ä¹æ‰€æœ‰ä¸»æµå‰ç«¯æ¡†æ¶çš„è¯­æ³•å¯¹æ¯”ã€‚

![[component-party.png]]



## æ–‡ç« 

### [React 18 æ˜¯å¦‚ä½•æå‡åº”ç”¨æ€§èƒ½çš„ï¼ˆè‹±æ–‡ï¼‰](https://vercel.com/blog/how-react-18-improves-application-performance)

React 18 å¼•å…¥äº†å¹¶å‘åŠŸèƒ½ï¼Œä»æ ¹æœ¬ä¸Šæ”¹å˜äº† React åº”ç”¨ç¨‹åºçš„æ¸²æŸ“æ–¹å¼ï¼Œæœ¬æ–‡å°†æ¢è®¨ Transitionsã€Suspense å’Œ React Server Components ç­‰æœ€æ–°åŠŸèƒ½æ˜¯å¦‚ä½•å½±å“å’Œæé«˜åº”ç”¨çš„æ€§èƒ½ã€‚è¯¥æ–‡ç« ç”± Vercel å›¢é˜Ÿæˆå‘˜ç¼–å†™ï¼Œå€¼å¾—ä¸€è¯»ã€‚

### [åº”ç”¨æ€§èƒ½æŒ‡æ ‡ - INPï¼ˆè‹±æ–‡ï¼‰](https://web.dev/inp/)

Chrome ä½¿ç”¨æ•°æ®æ˜¾ç¤ºï¼Œç”¨æˆ·åœ¨é¡µé¢ä¸ŠèŠ±è´¹çš„æ—¶é—´æœ‰ 90% æ˜¯åœ¨åŠ è½½åèŠ±è´¹çš„ï¼Œâ€‹â€‹å› æ­¤ä»”ç»†æµ‹é‡æ•´ä¸ªé¡µé¢ç”Ÿå‘½å‘¨æœŸçš„å“åº”èƒ½åŠ›éå¸¸é‡è¦ã€‚[Interaction to Next Paint (INP)](https://web.dev/inp/)æ˜¯ä¸€ä¸ªç”¨äºè§£å†³è¯¥é—®é¢˜çš„ Core Web Vitals æŒ‡æ ‡ï¼Œæµ‹é‡ä»ç”¨æˆ·ç¬¬ä¸€æ¬¡ä¸é¡µé¢äº¤äº’ï¼ˆä¾‹å¦‚å•å‡»æŒ‰é’®ï¼‰åˆ°è¯¥äº¤äº’åœ¨å±å¹•ä¸Šå¯è§çš„æ—¶é—´ï¼›è¯¥æŒ‡æ ‡å¯¹äºå…·æœ‰è®¸å¤šç”¨æˆ·äº¤äº’çš„é¡µé¢å°¤å…¶é‡è¦ï¼Œä¾‹å¦‚ç”µå•†ç½‘ç«™æˆ–ç¤¾äº¤åª’ä½“å¹³å°ã€‚å®ƒæ˜¯é€šè¿‡ç´¯ç§¯ç”¨æˆ·å½“å‰è®¿é—®æœŸé—´çš„æ‰€æœ‰ INP æµ‹é‡å€¼å¹¶è¿”å›æœ€å·®åˆ†æ•°æ¥æµ‹é‡çš„ã€‚


### [é€šè¿‡ä¿®æ”¹å‘½åå°† VS Code åŒ…ä½“ç§¯å‡å°‘ 20%ï¼ˆè‹±æ–‡ï¼‰](https://code.visualstudio.com/blogs/2023/07/20/mangling-vscode)

VS Code å›¢é˜Ÿæœ€è¿‘å°† VS Code çš„ JavaScript åŒ…ä½“ç§¯å¤§å°å‡å°‘äº† 20%ï¼Œæ•´ä½“èŠ‚çœå¤§çº¦ 3.9 MBã€‚ä»¤äººéœ‡æƒŠçš„æ˜¯ï¼Œå®ç°è¿™ä¸€ç›®æ ‡ç«Ÿç„¶åªæ˜¯ä¿®æ”¹äº†å˜é‡çš„å‘½åï¼Œå¾ˆæœ‰æ„æ€ï¼Œå€¼å¾—ä¸€è¯»ã€‚
![[vscode.png]]


### [2023 å¹´è¯·æŠ›å¼ƒ SVG-in-JSï¼ˆè‹±æ–‡ï¼‰](https://kurtextrem.de/posts/svg-in-js)

è¯¥æ–‡ç« ä½œè€…è®¤ä¸ºåœ¨ JS ä¸­ä½¿ç”¨ SVG ä¼šä¸¥é‡æŸå®³è¿è¡Œæ—¶æ€§èƒ½ï¼Œå¹¶è¯¦ç»†æ¢è®¨ä¸ºä½• SVG-in-JS æ˜¯ä¸€ç§åæ¨¡å¼ï¼Œå¹¶ç»™å‡ºäº†ä» JS åŒ…ä¸­ç§»é™¤ SVG çš„æœ€ä½³å®è·µï¼ŒåŒ…æ‹¬ä½¿ç”¨ img ä»¥åŠ use å¼•ç”¨ç­‰ã€‚
![[svg.png]]